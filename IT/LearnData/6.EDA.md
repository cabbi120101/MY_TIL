# 5. 탐색적 데이터 분석 (Exploratory Data Analysis, EDA)

탐색적 데이터 분석(EDA)은 데이터를 분석하기 전에 데이터를 탐색하고 이해하는 중요한 과정입니다. EDA는 데이터를 시각화하고 통계적으로 분석하여 숨겨진 패턴을 발견하고, 이상치를 탐지하며, 변수 간의 관계를 이해하는 데 중점을 둡니다. 심화된 EDA는 다양한 시각화 기법과 통계적 방법을 사용하여 데이터를 심층적으로 탐구합니다.

## 5.1 탐색적 데이터 분석의 목적

- **데이터의 구조 이해:** 데이터의 전반적인 구조, 분포, 범위를 이해하여 다음 분석 단계에 필요한 통찰력을 얻습니다.
- **이상치 및 결측치 탐지:** 데이터의 이상값과 결측치를 식별하여 이를 처리할 수 있는 전략을 수립합니다.
- **변수 간 관계 파악:** 변수들 간의 상관관계와 패턴을 찾아 분석 모델에 활용할 피처를 결정합니다.
- **데이터 전처리 방향 설정:** EDA를 통해 발견한 인사이트를 바탕으로 데이터 전처리와 피처 엔지니어링 전략을 수립합니다.

## 5.2 데이터 탐색 기법

### 5.2.1 기술 통계 분석 (Descriptive Statistics)

- **적합 상황:** 데이터의 기본적인 특성을 요약할 때 사용됩니다. 평균, 중앙값, 분산, 표준편차 등을 계산하여 데이터의 중심 경향과 변동성을 파악합니다.
- **예시:** 판매 데이터의 평균 판매량, 최댓값, 최솟값 등을 계산하여 기본 분포 이해.
- **사용 도구:** Pandas의 `describe()`, NumPy

### 5.2.2 데이터 분포 시각화

- **히스토그램 (Histogram):** 데이터의 분포를 시각적으로 보여주는 기본적인 방법으로, 데이터의 빈도를 막대의 높이로 표현합니다.
  - **적합 상황:** 연속형 데이터의 분포를 파악하고, 데이터가 특정 구간에 얼마나 집중되어 있는지 볼 때.
  - **예시:** 고객의 연령대 분포를 히스토그램으로 시각화하여 주 고객층을 분석.
  - **사용 도구:** Matplotlib, Seaborn의 `histplot()`
- **박스 플롯 (Box Plot):** 데이터의 중앙값, 사분위수, 이상치를 시각적으로 나타내어 데이터의 분포를 요약합니다.

  - **적합 상황:** 여러 그룹 간의 분포를 비교하고, 이상치를 빠르게 탐지할 때 유용합니다.
  - **예시:** 제품군별 매출 분포를 비교하여 어느 제품이 가장 일관된 판매를 보이는지 분석.
  - **사용 도구:** Seaborn의 `boxplot()`

- **커널 밀도 추정 (KDE Plot):** 데이터의 밀도를 부드러운 곡선으로 표현하여 데이터의 분포를 시각적으로 이해합니다.
  - **적합 상황:** 히스토그램보다 매끄럽게 데이터의 분포를 나타내고 싶을 때.
  - **예시:** 주택 가격의 분포를 KDE 플롯으로 시각화하여 고가 주택의 밀도를 파악.
  - **사용 도구:** Seaborn의 `kdeplot()`

### 5.2.3 상관 분석 (Correlation Analysis)

- **상관 행렬 (Correlation Matrix):** 여러 변수 간의 상관관계를 보여주는 행렬로, 변수 간의 양의 상관관계, 음의 상관관계, 독립성을 파악합니다.

  - **적합 상황:** 데이터의 모든 변수 간 관계를 한눈에 보고, 유의미한 관계를 찾을 때.
  - **예시:** 다양한 마케팅 지표 간의 상관관계를 분석하여 어떤 요소가 매출에 가장 영향을 미치는지 파악.
  - **사용 도구:** Pandas의 `corr()`, Seaborn의 `heatmap()`

- **산점도 (Scatter Plot):** 두 변수 간의 관계를 점으로 나타내어 상관성을 시각적으로 파악할 수 있습니다.
  - **적합 상황:** 변수 간의 상관관계를 직관적으로 이해하고 싶을 때 사용합니다.
  - **예시:** 광고비와 매출 간의 관계를 산점도로 시각화하여 광고 효과를 분석.
  - **사용 도구:** Matplotlib, Seaborn의 `scatterplot()`

### 5.2.4 변수 간 관계 분석

- **페어 플롯 (Pair Plot):** 여러 변수 간의 산점도를 한 번에 시각화하여 상관관계를 비교합니다.

  - **적합 상황:** 변수들이 서로 어떻게 상호작용하는지 종합적으로 이해할 때 유용합니다.
  - **예시:** 다양한 피처 간의 관계를 시각화하여 모델링에 사용할 피처를 선택.
  - **사용 도구:** Seaborn의 `pairplot()`

- **히트맵 (Heatmap):** 상관 행렬을 색상으로 시각화하여 변수 간의 관계를 더 쉽게 해석할 수 있게 합니다.
  - **적합 상황:** 상관 행렬을 시각적으로 표현하여 변수들 간의 강한 관계를 식별할 때.
  - **예시:** 변수가 많을 때, 가장 영향력 있는 변수 쌍을 식별하는 데 사용.
  - **사용 도구:** Seaborn의 `heatmap()`

## 5.3 이상치 탐색 및 처리 (Outlier Detection and Handling)

### 5.3.1 이상치 탐색 방법

- **IQR (Interquartile Range) 방법**

  - **설명:** 데이터의 1사분위수(Q1)와 3사분위수(Q3)의 차이인 IQR을 사용하여 이상치를 탐지합니다. 일반적으로 Q1 - 1.5*IQR 이하이거나 Q3 + 1.5*IQR 이상의 값을 이상치로 간주합니다.
  - **적합 상황:** 데이터가 정규 분포 또는 가우시안 분포를 따르지 않을 때, 특히 박스 플롯을 통해 시각적으로 이상치를 탐지할 때 사용합니다.
  - **예시:** 고객의 월별 지출액에서 IQR 방법을 사용하여 비정상적으로 높은 지출(이상치)을 탐지.
  - **처리 방법:** 이상치를 제거하거나, 특정 임계값으로 대체 (e.g., Q3 + 1.5\*IQR로 대체).

- **Z-score 방법**

  - **설명:** Z-score는 데이터가 평균으로부터 몇 표준편차 떨어져 있는지를 측정합니다. 일반적으로 Z-score가 ±3을 넘는 값을 이상치로 간주합니다.
  - **적합 상황:** 데이터가 정규 분포를 따를 때 효과적이며, 연속형 데이터에서 주로 사용됩니다.
  - **예시:** 학생의 시험 점수에서 평균으로부터 3표준편차 이상 떨어진 점수를 이상치로 탐지.
  - **처리 방법:** 해당 데이터를 제거하거나 중앙값으로 대체.

- **머신러닝 기반 탐지 (Isolation Forest, DBSCAN)**
  - **설명:** 이상치를 탐지하기 위해 머신러닝 알고리즘을 사용하여 데이터의 패턴을 학습합니다. Isolation Forest는 데이터를 분리하는 트리를 구축하여 이상치를 감지하며, DBSCAN은 밀도 기반 클러스터링을 통해 이상치(노이즈)를 탐지합니다.
  - **적합 상황:** 데이터가 고차원이고 복잡한 경우, 특히 비선형 관계를 포함하는 데이터셋에 유용합니다.
  - **예시:** 금융 데이터에서 이상 거래를 탐지하여 사기 방지.
  - **처리 방법:** 감지된 이상치의 경우 제거, 조정, 또는 별도로 분석.

### 5.3.2 이상치 처리 방법

- **제거 (Removal)**

  - **설명:** 이상치를 데이터에서 제거하는 간단한 방법입니다.
  - **적합 상황:** 이상치가 데이터의 극히 일부이며, 분석의 주요 패턴을 왜곡할 가능성이 높을 때.
  - **예시:** 연구 실험 중 오류로 인해 발생한 값 제거.

- **대체 (Replacement)**

  - **설명:** 이상치를 제거하지 않고 다른 값(중앙값, 평균, 인접 값 등)으로 대체하는 방법입니다.
  - **적합 상황:** 데이터의 일관성을 유지하고자 할 때.
  - **예시:** 센서 데이터에서 일시적인 오류로 발생한 값 대체.

- **별도 분석 (Separate Analysis)**
  - **설명:** 이상치를 별도로 분석하여 이상치의 원인과 의미를 파악합니다.
  - **적합 상황:** 이상치가 의미 있는 데이터를 포함할 수 있다고 판단될 때.
  - **예시:** 주식 시장에서의 급격한 가격 변동을 별도로 분석하여 시장 이벤트의 영향 파악.

## 5.4 결측치 탐색 및 처리 (Missing Data Analysis)

### 5.4.1 결측치 탐색 방법

- **단순 확인 (Simple Count)**

  - **설명:** 각 변수에서 결측치의 개수를 확인합니다.
  - **적합 상황:** 데이터의 결측치를 빠르게 탐지할 때.
  - **예시:** 설문조사 데이터에서 응답하지 않은 항목 확인.
  - **도구:** Pandas의 `isnull().sum()`

- **시각화 탐색 (Visualization)**

  - **설명:** 히트맵 등을 사용하여 데이터의 결측치를 시각적으로 탐색합니다.
  - **적합 상황:** 결측치가 데이터셋 전반에 어떻게 분포되어 있는지 확인하고자 할 때.
  - **예시:** 히트맵을 통해 결측 패턴을 시각적으로 확인.
  - **도구:** Seaborn의 `heatmap()`

- **패턴 분석 (Pattern Analysis)**
  - **설명:** 결측치의 발생 패턴을 분석하여 결측이 무작위인지 또는 특정 변수와 연관이 있는지 확인합니다.
  - **적합 상황:** 결측치가 특정 조건에 의해 발생할 가능성이 있는 경우.
  - **예시:** 특정 질문에만 결측이 높은 설문조사 데이터.

### 5.4.2 결측치 처리 방법

- **삭제 (Deletion)**
  - **설명:** 결측치가 포함된 행이나 열을 제거하는 방법입니다. 단순하지만 데이터의 손실을 초래할 수 있습니다.
  - **적합 상황:** 결측치가 매우 적고, 데이터의 전체 분석에 큰 영향을 미치지 않을 때.
  - **예시:** 결측치가 5% 이하인 경우 해당 행을 삭제.
- **대체 (Imputation)**

  - **평균/중앙값/모드 대체 (Mean/Median/Mode Imputation):**

    - **설명:** 결측치를 데이터의 평균, 중앙값, 모드로 대체하는 간단한 방법입니다.
    - **적합 상황:** 결측치가 무작위로 발생하고 데이터 분포에 큰 영향을 주지 않을 때.
    - **예시:** 학생 성적에서 결측된 점수를 반 전체 평균으로 대체.

  - **K-Nearest Neighbors Imputation (KNN Imputation):**

    - **설명:** 결측치를 채우기 위해 결측된 값을 갖지 않는 가장 가까운 이웃의 값을 사용합니다.
    - **적합 상황:** 결측치가 연관된 여러 변수를 활용하여 정확하게 대체하고자 할 때.
    - **예시:** 의료 데이터에서 환자의 특정 검사 결과 결측을 다른 환자 데이터를 참조하여 채움.

  - **회귀 대체 (Regression Imputation):**
    - **설명:** 다른 변수들을 이용해 회귀 모델을 생성하고, 해당 모델을 사용해 결측치를 예측하여 대체합니다.
    - **적합 상황:** 결측치가 다른 변수들과 강한 상관관계가 있을 때 유용합니다.
    - **예시:** 주택 가격 데이터에서 결측된 면적 값을 다른 변수(침실 수, 위치 등)를 통해 예측하여 대체.

- **다중 대체법 (Multiple Imputation)**
  - **설명:** 결측치를 여러 번 대체하여 다양한 시나리오를 생성하고, 그 결과들을 통합하여 분석의 일관성을 높입니다.
  - **적합 상황:** 결측치가 많고, 단일 대체 방법으로는 불확실성이 높은 경우.
  - **예시:** 임상 시험 데이터에서 결측된 환자 정보를 여러 대체 시나리오로 채워 분석.

## 5.5 데이터 변환 및 피처 엔지니어링

- **적합 상황:** 데이터의 분포를 변환하여 모델의 성능을 개선하거나, 새로운 피처를 생성하여 예측력을 높일 때 사용합니다.
- **예시:** 로그 변환을 사용하여 비대칭 분포를 정규분포에 가깝게 만듦.
- **기법:**
  - **스케일링 (Scaling):** 데이터의 크기를 정규화하여 모델에 적합하게 조정.
  - **인코딩 (Encoding):** 범주형 변수를 수치형으로 변환하여 모델에 사용할 수 있게 함.

## 5.6 EDA 도구 및 자동화

- **Python 라이브러리:**
  - Pandas, NumPy: 데이터 탐색 및 기초 통계 계산
  - Matplotlib, Seaborn: 시각화 라이브러리
  - Plotly: 대화형 시각화 도구
  - Sweetviz, Pandas Profiling: EDA를 자동화하여 종합적인 데이터 리포트를 생성
- **R 패키지:**
  - ggplot2: 고급 시각화 패키지
  - dplyr, tidyr: 데이터 조작 및 전처리

---

이 심화 내용을 통해 EDA의 다양한 기법과 그 적용 방법을 이해할 수 있습니다. 이상치와 결측치를 탐지하고 처리하는 방법을 학습하여 데이터의 품질을 높이고, 정확한 분석을 위한 기반을 마련할 수 있습니다. 실습을 통해 각 기법을 직접 사용해보고, 데이터를 심층적으로 탐구하여 인사이트를 도출하는 능력을 향상시킬 수 있습니다.
